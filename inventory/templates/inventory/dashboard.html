
{% extends 'inventory/base.html' %}
{% block title %}Dashboard — Shop Manager{% endblock %}
{% block content %}
<h1>Dashboard</h1>
<div class="grid">
  <div class="card">
    <h3>Total products</h3>
    <p>{{ total_products }}</p>
  </div>
  <div class="card">
    <h3>Total stock</h3>
    <p>{{ total_stock }}</p>
  </div>
  <div class="card">
    <h3>Total sales</h3>
    <p>{{ total_sales }}</p>
  </div>
</div>

<h2>Recent sales</h2>
<table class="table">
  <thead><tr><th>Product</th><th>Qty</th><th>Date</th><th>Total</th></tr></thead>
  <tbody>
    {% for s in recent_sales %}
      <tr>
        <td>{{ s.product.name }}</td>
        <td>{{ s.quantity }}</td>
        <td>{{ s.date|date:"Y-m-d H:i" }}</td>
        <td>{{ s.total_price }}</td>
      </tr>
    {% empty %}
      <tr><td colspan="4">No recent sales</td></tr>
    {% endfor %}
  </tbody>
</table>

<h2>Low stock</h2>
<ul>
  {% for p in low_products %}
    <li>{{ p.name }} — {{ p.stock }} left</li>
  {% empty %}
    <li>No low stock items.</li>
  {% endfor %}
</ul>
{% endblock %}
